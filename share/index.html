<!DOCTYPE html>

<!--
redditgifts map maker, an open source project hosted by emilie barnard
emiliebarnard.com
-->

<html>
  <head>
  <link rel="icon" type="image/png" href="gift@2x.png"/>
  <title>redditgifts map</title>
  <link rel="stylesheet" type="text/css" href="stylesheet.css" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	    <script type="text/javascript"
	      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBauEtRQ17iTKbRU3wC4QdFJ9ZzgJeHFF8&sensor=true">
	    </script>
	    
	    <script type="text/javascript"
	    	src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
	    </script>
	    
	    <script type="text/javascript" src="/redditgiftsmapmaker/retina.js"></script>
	    
	    <script type="text/javascript">
	    
	    var iconSizeX = 37; /* ratio should be close to 29/40 */
	    var iconSizeY = 51;
	    var homeIconDim = 28;
	    var map;
	    var loadedURL;
	    
	      function initialize() {
	       
	        var mapOptions = {
	          center: new google.maps.LatLng(39.828175, -98.579500),
	          zoom: 4, 
	          minZoom: 2,
	          maxZoom: 7,
	          streetViewControl: false
	        };
	       
	        map = new google.maps.Map(document.getElementById("map-canvas"),
	            mapOptions);
	            
          loadedURL = window.location.href;
          var homeMarker = new google.maps.Marker();
          
          setHeader();
          dropPins();
	            
	   		}
	   		
	   		google.maps.event.addDomListener(window, 'load', initialize);
	   		
	   		
	   		var exchangeNumber = {
	   				/* use the python script (part two) to generate the below part of the exchange name to number lookup table: */
					"secret santa 2009": 0,
					"arbitrary day 2010": 1,
					"secret santa 2010": 2,
					"r/books 2011": 3,
					"r/craftexchange 2011": 4,
					"r/snackexchange 2011": 5,
					"arbitrary day 2011": 6,
					"reddit trick or treat 2011": 7,
					"coffee mugs and tea cups 2011": 8,
					"secret santa 2011": 9,
					"t-shirts 2012": 10,
					"r/books 2012": 11,
					"yarn exchange 2012": 12,
					"cookbooks": 13,
					"my little pony": 14,
					"board games": 15,
					"awesomesocks": 16,
					"redditgifts for the troops": 17,
					"arbitrary day 2012": 18,
					"arbitrary day plus": 19,
					"presents for pets": 20,
					"vinyl exchange": 21,
					"decorate your dorm": 22,
					"comic books and graphic novels": 23,
					"reddit gifts for the teachers": 24,
					"doctor who": 25,
					"postcards": 26,
					"ties": 27,
					"makeup and nail polish": 28,
					"decorate my cubicle": 29,
					"reddit trick or treat plus": 30,
					"reddit trick or treat 2012": 31,
					"secret santa 2012": 32,
					"holiday greeting card exchange": 33,
					"pokemon exchange": 34,
					"snack exchange 2013": 35,
					"hats and scarves exchange": 36,
					"coffee and tea exchange": 37,
					"socks exchange": 38,
					"book exchange 2013": 39,
					"yarn exchange 2013": 40,
					"fantasy exchange": 41,
					"adventure time exchange": 42,
					"t-shirt exchange": 43,
					"manga exchange": 44,
					"horror exchange": 45,
					"awesome smell exchange": 46,
					"simple pleasures exchange": 47,
					"art prints exchange": 48,
					"plushy exchange": 49,
					"condiments exchange": 50,
					"star wars exchange": 51,
					"ameristralia exchange": 52,
					"phone cases exchange": 53,
					"doctor who (almost) 50th anniversary exchange": 54,
					"pens and stationery exchange": 55,
					"disney exchange": 56,
					"star trek exchange": 57,
					"nostalgia exchange": 58,
					"arbitrary day plus 2013": 59,
					"arbitrary day 2013": 60,
					"nintendo exchange": 61,
					"pints and shot glasses exchange": 62,
					"magnets exchange": 63,
					"game of thrones exchange": 64,
					"hometown exchange": 65,
					"arrested development exchange": 66,
					"now sharing absurdity - the nsa gift exchange": 67,
					"the world's end exchange plus": 68,
					"the world's end exchange": 69,
					"redditgifts for the teachers 2013": 70,
					"zombies": 71,
					"trading card games": 72,
					"kitchen goods": 73,
					"breaking bad": 74,
					"board games 2013": 75,
					"avatar: the last airbender": 76,
					"nfl": 77,
					"blind boxes and bags": 78,
					"whedon-verse": 79,
					"presents for pets 2013": 80,
					"reddit trick or treat 2013 plus": 81,
					"reddit trick or treat 2013": 82,
					"secret santa 2013": 83,
					"holiday cards 2013": 84,
					"dinosaurs": 85,
					"studio ghibli": 86,
					"awesome aprons": 87,
					"lunchboxes": 88,
					"harry potter": 89,
					"dc comics": 90,
					"100th exchange extravaganza!": 91,
					"snacks 2014": 92,
					"socks 2014": 93,
					"yarn 2014": 94,
					"stickers": 95,
					"lego": 96,
					"jim henson": 97,
					"ghostbusters": 98,
					"books 2014": 99,
					"archer": 100,
					"ties 2014": 101,
					"t-shirt 2014": 102,
					"soccer": 103,
					"tabletop rpgs": 104,
					"puzzles": 105,
					"ugly mugs": 106,
					"marvel universe": 107,
					"makeup & nail polish 2014": 108,
					"hockey": 109,
					"tim burton": 110
	   			/* use the python script (part two) to generate the above part of the exchange name to number lookup table: */	  
	   		  }; 
	   		  
	   		  var exchangeImageURL = {
	   				/* use the python script (part three) to generate the below part of the exchange number to image url lookup table: */
	   				"0": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/secret-santa-2009-logo/ss09.png",
	   				"1": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/arbitrary-day-2010-logo/ad10.png",
	   				"2": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/secret-santa-2010-logo/ss10.png",
	   				"3": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/rbooks-1-logo/rbooks_logo_1.png",
	   				"4": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/rcraftexchange-1-logo/rcraftexchange.png",
	   				"5": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/rsnackexchange-1-logo/rsnackexchange.png",
	   				"6": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/ad112.png",
	   				"7": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/halloween-logo/halloween.png",
	   				"8": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/coffee-mugs-and-tea-cups-logo/mugs.png",
	   				"9": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/secret-santa-2011/ss_2012.gif",
	   				"10": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/2/8/t-shirts-1328741603.gif",
	   				"11": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/rbooks-1-logo/rbooks_logo_1.png",
	   				"12": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/2/8/yarn-1328741654.gif",
	   				"13": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/3/23/cookbooks-1332525041.png",
	   				"14": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/3/23/my-little-pony-1332524825.png",
	   				"15": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/3/23/boardgames-1332524567.png",
	   				"16": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/3/23/socks-1332524236.png",
	   				"17": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/5/20/reddit-gifts-troops-1337581720.gif",
	   				"18": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/5/28/arbitrary-day-2012-1338262732.gif",
	   				"19": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/5/28/arbitrary-day-plus-1338262762.gif",
	   				"20": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/7/27/pets-1343427049.png",
	   				"21": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/7/27/vinyl-1343426989.png",
	   				"22": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/7/27/dorm-1343427073.png",
	   				"23": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/7/27/comics-1343427092.png",
	   				"24": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/7/27/teachers-1343427017.png",
	   				"25": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/9/6/dr-who-1346968838.png",
	   				"26": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/9/6/postcards-1346968317.png",
	   				"27": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/9/6/ties-1346967805.png",
	   				"28": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/9/7/makeup-1347032272.png",
	   				"29": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/9/6/decorate-my-cubicle-1346965985.png",
	   				"30": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/halloween-logo/halloween.png",
	   				"31": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/halloween-logo/halloween.png",
	   				"32": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/11/2/secret-santa-2012-1351877009.gif",
	   				"33": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/12/3/holiday-greeting-cards-1354552546.png",
	   				"34": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/1/25/pokemon-1359146410.png",
	   				"35": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/rsnackexchange-1-logo/rsnackexchange.png",
	   				"36": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/1/25/hats-and-scarves-1359146254.png",
	   				"37": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/1/24/coffee-and-tea-1359055910.png",
	   				"38": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/1/23/socks-new-1358981287.png",
	   				"39": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/rbooks-1-logo/rbooks_logo_1.png",
	   				"40": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/2/8/yarn-1328741654.gif",
	   				"41": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/2/27/fantasy-1362003804.png",
	   				"42": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/2/27/adventure-time-1362003660.png",
	   				"43": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/2/27/tshirts-2013-1362003634.png",
	   				"44": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/2/27/manga-1362003596.png",
	   				"45": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/2/27/horror-1362003540.png",
	   				"46": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/3/28/awesome-smell-1364496332.png",
	   				"47": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/3/28/simple-pleasures-1364496316.png",
	   				"48": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/3/28/art-prints-1364496295.png",
	   				"49": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/3/28/plushy-1364496280.png",
	   				"50": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/3/28/condiments-1364496260.png",
	   				"51": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/3/28/star-wars-1364496238.png",
	   				"52": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/4/29/ameristralia-1367253932.png",
	   				"53": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/4/25/phone-cases-1366931869.png",
	   				"54": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/9/6/dr-who-1346968838.png",
	   				"55": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/4/25/pens-and-stationary-1366931821.png",
	   				"56": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/4/25/disney-1366931887.png",
	   				"57": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/4/25/star-trek-1366931852.png",
	   				"58": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/4/25/nostalgia-1366931904.png",
	   				"59": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/5/16/arbitrary-day-plus-2013-1368760054.png",
	   				"60": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/5/16/arbitrary-day-2013-1368759955.png",
	   				"61": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/6/20/nintendo-1371762339.png",
	   				"62": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/4/25/pint-glasses-1366931924.png",
	   				"63": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/6/21/magnets-1371839333.png",
	   				"64": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/6/21/game-thrones-1371840210.png",
	   				"65": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/6/21/hometown-1371838981.png",
	   				"66": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/6/20/arrested-development-1371761674.png",
	   				"67": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/6/28/freedom-isnt-free-1372482060.png",
	   				"68": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/7/9/worlds-end-plus-1373400653.png",
	   				"69": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/6/24/worlds-end-1372098494.png",
	   				"70": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/8/16/teachers-2013-1376669257.png",
	   				"71": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/8/16/zombies-1376666915.png",
	   				"72": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/8/16/tcg-1376666823.png",
	   				"73": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/8/16/kitchen-goods-1376666870.png",
	   				"74": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/8/15/breaking-bad-1376634677.png",
	   				"75": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/8/15/board-games-2013-1376635231.png",
	   				"76": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/9/20/avatar-1379703050.png",
	   				"77": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/9/20/nfl-1379699443.png",
	   				"78": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/9/20/blind-boxes-and-bags-1379701023.png",
	   				"79": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/9/20/joss-1379699182.png",
	   				"80": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/9/20/presents-pets-2013-1379698807.png",
	   				"81": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/9/20/trick-or-treat-2013-plus-1379698290.png",
	   				"82": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/9/20/trick-or-treat-2013-1379698510.png",
	   				"83": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/11/2/secret-santa-2013-1383433440.png",
	   				"84": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/12/3/holiday-greeting-cards-1354552546.png",
	   				"85": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/1/5/dinosaurs-1388956140.png",
	   				"86": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/1/5/studio-ghibli-1388956046.png",
	   				"87": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/1/5/awesome-aprons-1388955970.png",
	   				"88": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/1/5/lunchboxes-1388955848.png",
	   				"89": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/1/5/harry-potter-1388955746.png",
	   				"90": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/1/5/dc-comics-1388955594.png",
	   				"91": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/2/15/100-1392497983.png",
	   				"92": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/rsnackexchange-1-logo/rsnackexchange.png",
	   				"93": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2013/1/23/socks-new-1358981287.png",
	   				"94": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/2/8/yarn-1328741654.gif",
	   				"95": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/2/9/stickers-1391969617.png",
	   				"96": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/2/9/lego-1391969361.png",
	   				"97": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/2/10/jim-henson-1392086804.png",
	   				"98": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/2/9/ghostbusters-1391969070.png",
	   				"99": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/2/9/books-2014-1391968957.png",
	   				"100": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/2/9/archer-1391968728.png",
	   				"101": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/9/6/ties-1346967805.png",
	   				"102": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/2/8/t-shirts-1328741603.gif",
	   				"103": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/3/19/soccer-1395244517.png",
	   				"104": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/3/19/rpg-1395244233.png",
	   				"105": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/3/19/puzzles-1395243100.png",
	   				"106": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/3/27/ugly-mugs-1395951198.png",
	   				"107": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/3/19/marvel-1395242664.png",
	   				"108": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2012/9/7/makeup-1347032272.png",
	   				"109": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/3/19/hockey-1395242271.png",
	   				"110": "https://d2npbuaakacvlz.cloudfront.net/images/uploaded/exchange-logo/2014/3/19/burton-1395241890.png"
	   				/* use the python script (part three) to generate the above part of the exchange number to image url lookup table: */
	   				};
	   		
	   		
	   	function dropPins(){
		   	//first we need to separate the pins
		   	var pinInfoInURL = loadedURL.replace("http://embarnard.com/redditgiftsmapmaker/share/?&","");
		   	pinInfoInURL = pinInfoInURL.slice(0, -1); //remove last &
		   	
		   	var arrayOfPinInfo = pinInfoInURL.split("&");

		   	//then we drop them like we did in other file
		   	for (var j = 0; j < arrayOfPinInfo.length; j++){
			   	
			   	var pinDialog = '<div class="pinContent">';
			   	// first we split up the info
			   	var arrayOfThisPin = arrayOfPinInfo[j].split(",");
			   	
			   	//name of exchange
			   	var exchange = decodeURIComponent(arrayOfThisPin[0]);
			   	
			   	//position of pin:
			   	var lat = arrayOfThisPin[1];
			   	var lng = arrayOfThisPin[2];
			   	
			   	var username = "";
			   	
			 	//  	now we have to check the optional parameters
			 	// 
			 	//  	if (arrayOfThisPin.length == 5){	//case that all optional fields were filled out (username and it's a rematch case)
			 	// 	username = arrayOfThisPin[3];
			 	// 	pinDialog += '<p><b>exchange</b>: ' +  exchange + ' (rematch)';
			 	// 	pinDialog += '<br><b>giftee</b>: <a href="http://reddit.com/u/' + username + '" target="_blank">/u/' + username + '</a>';
			 	// }
			 	// 
			 	// if (arrayOfThisPin.length == 4 ){ //case that one optional field was filled out (username or rematch)
			 	// 	if (arrayOfThisPin[3].localeCompare("") == 0){ //rematch case
			 	//  	pinDialog += '<p><b>exchange</b>: ' +  exchange + ' (rematch)';
			 	// 	}
			 	// 	else{ //username case
			 	//  	username = arrayOfThisPin[3];
			 	//  	pinDialog += '<br><b>giftee</b>: <a href="http://reddit.com/u/' + username + '" target="_blank">/u/' + username + '</a>';
			 	// 	}
			 	// 	
			 	// }
			 	// 
			 	// if (arrayOfThisPin.length == 3){ //required fields only case
			 	// 	pinDialog += '<p><b>exchange</b>: ' +  exchange;
			 	// }
			 	
			 	pinDialog += '</p></div>';
			 	
			 	var pinWindow = new google.maps.InfoWindow({
			 		  content: pinDialog,
			 		  maxWidth: 150
			 		  });
			 	
			 	
			 	var pinPos = new google.maps.LatLng(lat, lng);
			 	
			 	var pinImg = {
			 		url: exchangeImageURL[exchangeNumber[exchange]],
			 		scaledSize: new google.maps.Size(iconSizeX, iconSizeY),
			 		origin: new google.maps.Point(0, 0),
			 		anchor: new google.maps.Point(iconSizeX/2, iconSizeY/2)
			 	};
			 	
			 	var pinMarker = new google.maps.Marker({
			 		position: pinPos,
			 		map: map,
			 		icon: pinImg,
			 		title: exchange,
			 		animation: google.maps.Animation.DROP
			 	});
			 	
			 	// google.maps.event.addListener(pinMarker, 'click', function() {
			 	//   pinWindow.open(map,pinMarker);
			 	// });
			   	
		   	}
		   	
	   	}
	   	
	   	
	   	function setHeader(){ //also sets home
	   		var userInfoInURL = loadedURL.replace("http://embarnard.com/redditgiftsmapmaker/share/?","");
	   		var userInfo = "";
	   		var i = 0;
	   		var commaCount = 0;
	   		var lat = "";
	   		var lng = "";
	   		var userName = "";
	   		
	   		while (userInfoInURL.charAt(i).localeCompare("&") != 0){
		   		userInfo += userInfoInURL.charAt(i);
		   		//comma check:
		   		if (userInfoInURL.charAt(i).localeCompare(",") == 0){
			   		commaCount ++;
		   		}
		   		i++;
	   		}
	   		
	   		i=0; //reset
	   		loadedURL = loadedURL.replace(userInfo,""); //removes the user info from the loaded url, leaving just the info regarding giftee pins
	   			   		
	   		//if comma count is zero, no user info given
	   		if (commaCount > 0){
	   		
	   		//if comma count is one, we have the location but not the username:
	   		if (commaCount == 1){
		   		while (userInfo.charAt(i).localeCompare(",") != 0){
		   			lat += userInfo.charAt(i);
		   			i++;
		   		}
		   		lat = parseFloat(lat, "10");
		   		
		   		i++; //get past the comma
		   		
		   		while (i < userInfo.length){
			   		lng += userInfo.charAt(i);
			   		i++;
		   		}
		   		
		   		lng = parseFloat(lng, "10");
		   		
		   		
		   		//drop home pin:
		   		// geocoder = new google.maps.Geocoder();
		   		
		   		var homeDialog = '<div class="homeContent">' + '<p>home sweet home</p>' + '</div>';
		   		
		   		var homeWindow = new google.maps.InfoWindow({
		   			  content: homeDialog,
		   			  maxWidth: 100
		   		  });
		   		
		   			var pinPos = new google.maps.LatLng(lat, lng);
		   			
		   			var pinImg = {
		   				url: 'home@2x.png',
		   				scaledSize: new google.maps.Size(homeIconDim, homeIconDim),
		   				origin: new google.maps.Point(0, 0),
		   				anchor: new google.maps.Point(homeIconDim/2, homeIconDim/2)
		   			};
		   			homeMarker = new google.maps.Marker({
		   				position: pinPos,
		   				map: map,
		   				icon: pinImg,
		   				title: "Home Sweet Home",
		   				animation: google.maps.Animation.DROP
		   			});
		   			google.maps.event.addListener(homeMarker, 'click', function() {
		   				homeWindow.open(map,homeMarker);
		   			  });
	   		
	}	   		
	   		//if comma count is two, we have the location and the username:
	   		if (commaCount == 2){
		   		//get username:
		   		while (userInfo.charAt(i).localeCompare(",") != 0){
			   		userName += userInfo.charAt(i);
			   		i++;
			   	}
			   	
			   	//set header to have username in it:
			   	var headerTag = document.getElementById("header");
			   	var currentHeader = headerTag.innerHTML;
			   	headerTag.innerHTML = currentHeader + " for " + userName;
			   	
			   	i++; //get past the comma
			   	
			   	//get position
			   	while (userInfo.charAt(i).localeCompare(",") != 0){
			   	   			lat += userInfo.charAt(i);
			   	   			i++;
				}
				lat = parseFloat(lat, "10");
				
				
				i++; //get past the comma
				
				while (i < userInfo.length){
				   	lng += userInfo.charAt(i);
				   	i++;
				}
				lng = parseFloat(lng, "10");
				
				
				//drop home pin:
				
				var homeDialog = '<div class="homeContent">' + '<p>home of <a href="http://reddit.com/u/' + userName + '" target="_blank">/u/' + userName + '</a></p>' + '</div>';
				
				var homeWindow = new google.maps.InfoWindow({
					  content: homeDialog,
					  maxWidth: 100
				  });
				var pinPos = new google.maps.LatLng(lat, lng);
				  
				  var pinImg = {
				  	url: 'home@2x.png',
				  	scaledSize: new google.maps.Size(homeIconDim, homeIconDim),
				  	origin: new google.maps.Point(0, 0),
				  	anchor: new google.maps.Point(homeIconDim/2, homeIconDim/2)
				  };
				    
				  
				homeMarker = new google.maps.Marker({
					position: pinPos,
					map: map,
					icon: pinImg,
					title: "Home Sweet Home",
					animation: google.maps.Animation.DROP
				});
				google.maps.event.addListener(homeMarker, 'click', function() {
					homeWindow.open(map,homeMarker);
				  });
				
					var pinPos = new google.maps.LatLng(lat, lng);
					
					var pinImg = {
						url: 'home@2x.png',
						scaledSize: new google.maps.Size(homeIconDim, homeIconDim),
						origin: new google.maps.Point(0, 0),
						anchor: new google.maps.Point(homeIconDim/2, homeIconDim/2)
					};

	}
	   	}

		}
 
	    </script>  
  </head>
  
  
  
  <body>
  	<h1 id="header"><span style="color:#ff5700">reddit</span><span style="color:#336699">gifts</span> map</h1>
  	<div id="map-canvas"></div>
    <div id="copyright">This site is not affiliated with nor endorsed by <a href="http://www.reddit.com">reddit</a> or <a href="http://www.redditgifts.com">redditgifts</a>.<br><br>Emilie Menard Barnard<br><a href="http://www.reddit.com/user/Fluffaykitties/">/u/fluffaykitties</a><br><a href="http://emiliebarnard.com">emiliebarnard.com</a></div>
  </body>
</html>