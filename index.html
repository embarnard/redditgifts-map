<!DOCTYPE html>
<html>
  <head>
  <title>Redditgifts Map Maker</title>
  <link rel="stylesheet" type="text/css" href="stylesheet.css" />
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  
      <!--
<style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
-->
	    <script type="text/javascript"
	      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBauEtRQ17iTKbRU3wC4QdFJ9ZzgJeHFF8&sensor=true">
	    </script>
	    
	    <script type="text/javascript"
	    	src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
	    </script>
	    
	    <script type="text/javascript">
	    
	    var iconSize = 50;
	    var map;
	    
	      function initialize() {
	       
	        var mapOptions = {
	          center: new google.maps.LatLng(39.828175, -98.579500),
	          zoom: 4, 
	          minZoom: 2,
	          maxZoom: 7,
	          streetViewControl: false
	        };
	       
	        map = new google.maps.Map(document.getElementById("map-canvas"),
	            mapOptions);
	            
	            
	   		}
	      
		  
		  google.maps.event.addDomListener(window, 'load', initialize);
		  var geocoder;
		  
		function dropPin(){
			geocoder = new google.maps.Geocoder();
			var post = $('#postCode').val();
			var lat;
			var lng;
			geocoder.geocode({address: post},
			function(results_array, status) { 
				lat = results_array[0].geometry.location.lat();
				lng = results_array[0].geometry.location.lng();
			
				var pinPos = new google.maps.LatLng(lat, lng);
				
				var pinImg = {
				    url: 'http://www.fluffaykitties.com/jemimaup1.png',
				    scaledSize: new google.maps.Size(iconSize, iconSize),
				    origin: new google.maps.Point(0, 0),
				    anchor: new google.maps.Point(iconSize/2, iconSize/2)
				};
				
				var pinMarker = new google.maps.Marker({
					position: pinPos,
					map: map,
					icon: pinImg,
					title: "MEOW"
				});

			});			
		};
		
		$(document).ready(function(){
	
		/* This allows the user to press enter rather than the start encryption button while in the rule number form box */
		  $("input").keypress(function(event) {
		    if (event.which == 13 ) {
		        $("#dropPinButton").click();
		    }
	  }); 
    
});	 
	    </script>
    
  </head>
  <body>
  	<h1><span style="color:#ff5700">reddit</span><span style="color:#336699">gifts</span> Map Maker</h1>
  	<p>
  	Post Code: <input type="text" id="postCode" size="10" value="#########">
  	<br>
  	<input id="dropPinButton" type="button" onclick="dropPin()" value="Drop Pin!">
  	</p>
    <div id="map-canvas"></div>
    <div id="copyright">Emilie Menard Barnard<br><a href="http://www.reddit.com/user/Fluffaykitties/">u/fluffaykitties</a><br><a href="http://emiliebarnard.com">emiliebarnard.com</a><br><a href="http://redditgifts.com">redditgifts.com</a></div>
  </body>
</html>
